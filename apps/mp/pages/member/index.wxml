<view class="container">
  
  <!-- 1. 用户信息区域 -->
  <view class="user-info-section" bindtap="onUserInfoClick">
    <image class="user-avatar" src="{{userInfo.avatar}}" />
    <view class="user-details">
      <text class="user-nickname">{{userInfo.nickname}}</text>
      <text class="user-id">{{userInfo.id}}</text>
    </view>
  </view>

  <!-- 2. 会员卡片区域 -->
  <view class="member-card">
    <view class="card-header">
      <view class="level-info">
        <text class="level-tag">{{memberInfo.level}}</text>
        <text class="level-name">{{memberInfo.levelName}}</text>
      </view>
    </view>
    
    <view class="card-body">
      <text class="progress-text">(距离升下一级还差{{memberInfo.nextLevelDiff}}成长值)</text>
      <view class="view-more">查看更多 ></view>
    </view>

    <!-- 数据统计栏 (嵌入卡片下方) -->
    <view class="stats-row">
      <view class="stat-item">
        <text class="stat-value">{{stats.coins}}</text>
        <text class="stat-label">金币</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{stats.points}}</text>
        <text class="stat-label">积分</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{stats.coupons}}</text>
        <text class="stat-label">券</text>
      </view>
    </view>

    <!-- 充值按钮 -->
    <button class="recharge-btn" bindtap="onRecharge">点击充值</button>
  </view>

  <!-- 3. 功能菜单列表 -->
  <view class="menu-list">
    <block wx:for="{{menuList}}" wx:key="text">
      <view class="menu-item" bindtap="onMenuClick" data-index="{{index}}">
        <view class="menu-left">
          <image class="menu-icon" src="{{item.icon}}" /> <!-- 实际应替换为对应图标 -->
          <text class="menu-text">{{item.text}}</text>
        </view>
        <text class="menu-arrow">></text>
      </view>
    </block>
  </view>

  <!-- 底部导航栏 -->
  <tab-bar selected="3"></tab-bar>

  <!-- 4. 充值弹窗 -->
  <view class="modal-mask" wx:if="{{showRechargePopup}}" bindtap="hideRecharge">
    <view class="modal-content" catchtap="true">
      <view class="modal-title">充值金币</view>
      
      <!-- 金额选项网格 -->
      <view class="amount-grid">
        <block wx:for="{{rechargeOptions}}" wx:key="amount">
          <view class="amount-item {{selectedAmount === item.amount ? 'active' : ''}}" 
                bindtap="selectAmount" 
                data-amount="{{item.amount}}">
            <text class="amount-value">¥{{item.amount}}</text>
            <text class="amount-desc">{{item.desc}}</text>
          </view>
        </block>
      </view>

      <!-- 自定义输入框 -->
      <view class="input-container">
        <input class="custom-input" 
               type="number" 
               placeholder="请输入金额" 
               placeholder-class="input-placeholder"
               value="{{inputAmount}}" 
               bindinput="onInputAmount" />
        <view class="clear-btn" bindtap="clearInput" wx:if="{{inputAmount}}">X</view>
      </view>

      <!-- 赠送提示 (简单逻辑：显示选中项的赠送，如果是自定义输入则暂不显示或显示默认) -->
      <view class="bonus-tip">
        {{selectedAmount ? '赠送' + (selectedAmount * 15) + '积分' : (inputAmount ? '赠送' + (inputAmount * 15) + '积分' : '请选择充值金额')}}
      </view>

      <!-- 底部按钮 -->
      <view class="modal-footer">
        <view class="cancel-btn" bindtap="hideRecharge">取消</view>
        <view class="submit-btn" bindtap="submitRecharge">提交</view>
      </view>
    </view>
  </view>

</view>
