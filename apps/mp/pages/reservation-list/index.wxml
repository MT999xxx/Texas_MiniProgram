<view class="container">
  <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->
  <view class="tabs">
    <view
      wx:for="{{tabs}}"
      wx:key="status"
      class="tab-item {{currentTab === item.status ? 'active' : ''}}"
      bindtap="switchTab"
      data-status="{{item.status}}"
    >
      <text class="tab-text">{{item.label}}</text>
      <view wx:if="{{currentTab === item.status}}" class="tab-indicator"></view>
    </view>
  </view>

  <!-- é¢„çº¦åˆ—è¡¨ -->
  <view class="list-container">
    <view wx:if="{{loading}}" class="loading-box">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <view wx:elif="{{reservations.length === 0}}" class="empty-box">
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">æš‚æ— é¢„çº¦è®°å½•</text>
      <button class="btn-goto-reserve" bindtap="gotoReserve">ç«‹å³é¢„çº¦</button>
    </view>

    <view wx:else class="reservation-list">
      <view
        wx:for="{{reservations}}"
        wx:key="id"
        class="reservation-item"
        bindtap="viewDetail"
        data-id="{{item.id}}"
      >
        <!-- çŠ¶æ€æ ‡ç­¾ -->
        <view class="status-badge status-{{item.status}}">
          {{item.statusText}}
        </view>

        <!-- é¢„çº¦ä¿¡æ¯ -->
        <view class="reservation-content">
          <view class="info-row">
            <text class="icon">ğŸ—“</text>
            <text class="label">é¢„çº¦æ—¶é—´ï¼š</text>
            <text class="value">{{item.reservedAtText}}</text>
          </view>

          <view class="info-row">
            <text class="icon">ğŸ“</text>
            <text class="label">æ¡Œå°ï¼š</text>
            <text class="value">{{item.table.name}}</text>
            <text class="capacity">({{item.table.capacity}}äººåº§)</text>
          </view>

          <view class="info-row">
            <text class="icon">ğŸ‘¥</text>
            <text class="label">å°±é¤äººæ•°ï¼š</text>
            <text class="value">{{item.partySize}}äºº</text>
          </view>

          <view class="info-row">
            <text class="icon">ğŸ‘¤</text>
            <text class="label">è”ç³»äººï¼š</text>
            <text class="value">{{item.customerName}}</text>
            <text class="phone">{{item.phone}}</text>
          </view>

          <view wx:if="{{item.note}}" class="info-row">
            <text class="icon">ğŸ’¬</text>
            <text class="label">å¤‡æ³¨ï¼š</text>
            <text class="value note-text">{{item.note}}</text>
          </view>
        </view>

        <!-- æ“ä½œæŒ‰é’® -->
        <view class="action-buttons" wx:if="{{item.status === 'PENDING' || item.status === 'CONFIRMED'}}">
          <button
            class="btn-cancel"
            catchtap="cancelReservation"
            data-id="{{item.id}}"
          >
            å–æ¶ˆé¢„çº¦
          </button>
        </view>

        <!-- é¢„çº¦æ—¶é—´ -->
        <view class="created-time">
          <text class="time-label">é¢„çº¦äº {{item.createdAtText}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
